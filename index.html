<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>未来選択シミュレーション</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f4f8;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .container {
      max-width: 800px;
      padding: 20px;
      margin-top: 40px;
      background: white;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      border-radius: 10px;
    }
    .question, .result, .param-bar {
      margin-top: 20px;
    }
    .choice-button {
      display: block;
      margin: 10px 0;
      padding: 10px;
      width: 100%;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .choice-button:hover {
      background-color: #2980b9;
    }
    .next-button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #2ecc71;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .bar-container {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .bar {
      height: 20px;
      background-color: #ddd;
      border-radius: 10px;
      overflow: hidden;
    }
    .bar-fill {
      height: 100%;
      background-color: #4CAF50;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>未来選択シミュレーション</h1>
    <div id="content"></div>
    <button class="next-button" id="nextBtn" onclick="handleNext()" style="display: none;">次へ</button>
  </div>

  <script>
    const questions = [
  {
    text: "第二次世界大戦が勃発した...",
    choices: [
      { text: "軍備拡張を行う", effects: { defense: 30, diplomacy: -20 } },
      { text: "平和条約を結ぶ", effects: { diplomacy: 20 } },
      { text: "中立を維持する", effects: { diplomacy: 10, defense: 10 } },
    ]
  },
  {
    text: "1960年代、高度経済成長期が始まった...",
    choices: [
      { text: "経済発展を最優先する", effects: { economy: 30, environment: -20 } },
      { text: "環境への配慮も行う", effects: { economy: 10, environment: 10 } },
      { text: "発展より安定を重視する", effects: { economy: 5, education: 15 } },
    ]
  },
  {
    text: "1980年代、コンピューターが普及し始めた...",
    choices: [
      { text: "学校に情報教育を導入する", effects: { education: 25, economy: 10 } },
      { text: "軍事利用に集中する", effects: { defense: 20, education: -10 } },
      { text: "公共インフラの効率化に使う", effects: { economy: 15, health: 10 } },
    ]
  },
  {
    text: "2000年代、地球温暖化が深刻化し始めた...",
    choices: [
      { text: "石油依存を続ける", effects: { economy: 20, environment: -25 } },
      { text: "再生可能エネルギーに切り替える", effects: { environment: 25, economy: -10 } },
      { text: "国際会議で他国と協調する", effects: { diplomacy: 15, environment: 10 } },
    ]
  },
  {
    text: "2020年代、世界的パンデミックが発生した...",
    choices: [
      { text: "国境を閉じる", effects: { defense: 10, diplomacy: -15, health: 10 } },
      { text: "ワクチン開発に全力を注ぐ", effects: { health: 30, economy: -10 } },
      { text: "オンライン学習を整備する", effects: { education: 20, economy: 5 } },
    ]
  },
  {
    text: "2035年、AIが社会のあらゆる場面に導入されるようになった...",
    choices: [
      { text: "産業をAIに置き換える", effects: { economy: 30, education: -10 } },
      { text: "人間との共存に配慮する", effects: { education: 15, economy: 10 } },
      { text: "利用を規制する", effects: { diplomacy: 10, economy: -10 } },
    ]
  },
  {
    text: "2040年、宇宙開発競争が激化した...",
    choices: [
      { text: "宇宙軍を設立する", effects: { defense: 25, economy: -10 } },
      { text: "国際共同開発を進める", effects: { diplomacy: 20, economy: 10 } },
      { text: "地球の問題に集中する", effects: { environment: 15, defense: -10 } },
    ]
  },
  {
    text: "2045年、地球温暖化の影響で気候が極端化した...",
    choices: [
      { text: "大規模な植林プロジェクトを行う", effects: { environment: 30, economy: -10 } },
      { text: "脱炭素都市を建設する", effects: { environment: 20, economy: 10 } },
      { text: "他国に責任を押し付ける", effects: { diplomacy: -20, economy: 10 } },
    ]
  },
  {
    text: "2050年、世界で教育格差が深刻化した...",
    choices: [
      { text: "国際支援で教育を広める", effects: { education: 30, diplomacy: 10 } },
      { text: "国内教育に集中する", effects: { education: 20 } },
      { text: "教育より経済対策を優先する", effects: { economy: 15, education: -10 } },
    ]
  },
  {
    text: "2060年、遺伝子技術が人類の寿命を延ばす時代に...",
    choices: [
      { text: "医療に投資する", effects: { health: 30, economy: -10 } },
      { text: "倫理的議論を優先する", effects: { diplomacy: 10, health: -5 } },
      { text: "技術利用を制限する", effects: { health: -10, education: 10 } },
    ]
  }
];


    const params = {
      environment: 50,
      economy: 50,
      health: 50,
      education: 50,
      defense: 50,
      diplomacy: 50
    };

    let step = 0;
    let substep = 0;

    function showQuestion() {
      const q = questions[step];
      const content = document.getElementById('content');
      let html = `<h2>${q.text}</h2>`;
      q.choices.forEach((c, index) => {
        html += `<button class='choice-button' onclick='selectChoice(${index})'>${c.text}</button>`;
      });
      content.innerHTML = html;
      document.getElementById('nextBtn').style.display = 'none';
    }

    function selectChoice(index) {
      const effects = questions[step].choices[index].effects;
      for (const key in effects) {
        params[key] += effects[key];
      }
      document.getElementById('nextBtn').style.display = 'block';
    }

    function handleNext() {
      step++;
      if (step < questions.length) {
        showQuestion();
      } else {
        showResults();
      }
    }

    function showResults() {
      const content = document.getElementById('content');
      let summary = "";
      const values = Object.values(params);
      const total = values.reduce((a, b) => a + b);
      let evaluation = "";

      if (total >= 500) evaluation = "理想の世界（緑豊かで経済も健康も最高レベル）";
      else if (total >= 400) evaluation = "希望ある未来（課題もあるが前向きな社会）";
      else if (total >= 300) evaluation = "不安定な未来（希望もあるが大きな不安が残る）";
      else evaluation = "荒廃した世界（自然や秩序が崩壊し混沌に包まれている）";

      summary += `<h2>未来の結果</h2><p><strong>${evaluation}</strong></p>`;

      // 詳細2項目表示
      const sortedParams = Object.entries(params).sort((a, b) => b[1] - a[1]);
      const top = sortedParams[0];
      const second = sortedParams[1];
      const bottom = sortedParams[sortedParams.length - 1];
      const secondBottom = sortedParams[sortedParams.length - 2];

      if (total >= 500) {
        summary += `<p>${describeFuture(top[0], top[1])}</p>`;
        summary += `<p>${describeFuture(second[0], second[1])}</p>`;
      } else if (total >= 400 || total >= 300) {
        summary += `<p>${describeFuture(top[0], top[1])}</p>`;
        summary += `<p>${describeFuture(bottom[0], bottom[1])}</p>`;
      } else {
        summary += `<p>${describeFuture(bottom[0], bottom[1])}</p>`;
        summary += `<p>${describeFuture(secondBottom[0], secondBottom[1])}</p>`;
      }

      // グラフ
      summary += `<div class='bar-container'>`;
      for (const [key, val] of Object.entries(params)) {
        summary += `<div><strong>${key}</strong>
          <div class='bar'><div class='bar-fill' style='width: ${val}%;'></div></div>
        </div>`;
      }
      summary += `</div>`;

      content.innerHTML = summary;
      document.getElementById('nextBtn').style.display = 'none';
    }

    function describeFuture(key, value) {
      if (value >= 70) {
        switch (key) {
          case "environment": return "地球の緑は失われることなく、清らかな水と空気に包まれた。";
          case "economy": return "人々は貧しさを知らず、安定した経済の中で自由を手にした。";
          case "health": return "病気は制圧され、誰もが健康に生きられる時代が訪れた。";
          case "education": return "学びは全ての人に開かれ、誰もが未来を描ける社会となった。";
          case "defense": return "堅実な防衛が国家を守り、国民は安心して暮らすことができた。";
          case "diplomacy": return "世界との信頼関係が築かれ、争いのない時代が幕を開けた。";
        }
      } else if (value < 30) {
        switch (key) {
          case "environment": return "自然は壊滅し、砂漠と灰に包まれた世界が広がっていた。";
          case "economy": return "経済は崩壊し、物資も仕事も枯渇した時代が訪れた。";
          case "health": return "医療の崩壊は多くの命を奪い、人々は恐怖の中にあった。";
          case "education": return "教育は一部の特権となり、格差が人々を分断した。";
          case "defense": return "防衛の穴から侵略を受け、人々は故郷を失っていった。";
          case "diplomacy": return "世界から孤立した国は、冷たく閉ざされた鉄の壁に覆われていた。";
        }
      } else {
        return "社会は変化の波の中にあり、確かな未来はまだ見えていない。";
      }
    }

    showQuestion();
  </script>
</body>
</html>
