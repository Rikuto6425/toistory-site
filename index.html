<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>未来シミュレーション</title>
  <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <style>
    body {
      font-family: "Arial", sans-serif;
      padding: 40px;
      background-color: #f4f4f4;
    }

    h1 {
      font-size: 2rem;
      text-align: center;
    }

    .center-text {
      font-size: 2rem;
      font-weight: bold;
      color: #2c3e50;
      text-align: center;
      margin: 40px 0;
    }

    .story-section {
      margin-bottom: 2rem;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">

    const statComments = {
      環境: [
        "環境保全の努力が実を結び、町には緑が戻り、空気は澄んでいる。",
        "気候変動への無関心が災いし、猛暑や洪水に悩まされる未来が訪れる。"
      ],
      経済: [
        "地元経済が活性化し、若者も地元で希望を見出せる未来。",
        "産業衰退により働き口が減り、多くの若者が町を離れる。"
      ],
      医療: [
        "医療の充実で高齢者も安心して暮らせる社会が実現する。",
        "医療資源の不足で、必要な治療が受けられない人が増える。"
      ],
      教育: [
        "未来の担い手を育てる教育が充実し、知識と創造力に溢れる町となる。",
        "教育機会の格差が広がり、夢を諦める子どもたちが増える。"
      ]
    };

    const specialCombinations = [
      {
        condition: stats => stats.教育 > 60 && stats.経済 > 60,
        message: "教育と経済の相乗効果でイノベーション国家が誕生した！"
      },
      {
        condition: stats => stats.環境 > 70 && stats.医療 > 70,
        message: "自然と共存する福祉社会が築かれた。"
      },
      {
        condition: stats => stats.教育 < 40 && stats.経済 < 40,
        message: "教育と経済が崩壊し、国家の未来が閉ざされた。"
      }
    ];

    const FinalNarration = ({ stats }) => {
      const results = [];

      for (let key in stats) {
        const value = stats[key];
        const comment = value >= 50 ? statComments[key][0] : statComments[key][1];
        results.push(`${key}：${comment}`);
      }

      const special = specialCombinations
        .filter(s => s.condition(stats))
        .map(s => s.message);

      const idealFuture = "理想の未来：誰もが笑顔で暮らせる持続可能な社会の実現！";

      return (
        <div>
          <div className="center-text">{idealFuture}</div>
          <div className="story-section">
            <h2>あなたの選択によって導かれた未来:</h2>
            <ul>
              {results.map((r, i) => <li key={i}>{r}</li>)}
            </ul>
            {special.length > 0 && (
              <React.Fragment>
                <h3>特別な未来:</h3>
                <ul>
                  {special.map((s, i) => <li key={i}>{s}</li>)}
                </ul>
              </React.Fragment>
            )}
          </div>
        </div>
      );
    };

    const App = () => {
      const past = "過去：かつてこの地域は豊かな自然と活気ある産業で知られていた。";
      const present = "現在：産業構造の変化や少子高齢化により、町は転機を迎えている。";
      const stats = { 環境: 75, 経済: 65, 医療: 80, 教育: 85 }; // 例としてのデータ

      return (
        <div>
          <h1>地域の未来ストーリー</h1>
          <div className="story-section"><strong>{past}</strong></div>
          <div className="story-section"><strong>{present}</strong></div>
          <FinalNarration stats={stats} />
        </div>
      );
    };

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
